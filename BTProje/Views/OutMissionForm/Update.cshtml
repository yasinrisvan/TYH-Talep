
@using BTProje.Models.EntityFramework;

@model BTProje.Models.EntityFramework.DgsForm
@{
    ViewBag.Title = "Update";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
    string endDate = Model.EndDate.ToString();
    string startDate = Model.StartDate.ToString();
    KullaniciTablosu kullanici = (KullaniciTablosu)Session["kullanici"];
    List<RolYetkiAtama> yetki = (List<RolYetkiAtama>)Session["yetki"];
}

@using (Html.BeginForm("Update", "OutMissionForm", FormMethod.Post))
{
    <fieldset>
        <div id="gonderen" class="gonderen" style="margin-top:15px;">
            <h4 style="text-align:center; margin-top:50px;"> AR-GE MERKEZİ GÖREVLİ PERSONEL FORMU </h4>
            @*<h5 style="margin-left: 35px; margin-bottom: 20px">Gönderen</h5>*@

            @Html.DropDownListFor(m => m.UserId, (List<SelectListItem>)ViewBag.User, "GÖREVLİ PERSONELİ SEÇİNİZ", new { @class = "form-control", required = "Boş Bırakılamaz" })<br />
            @foreach (var item in yetki)
            {
                if (item.Rol_Id == 9)
                {
                    @Html.DropDownListFor(m => m.UnitOfDepartment, (List<SelectListItem>)ViewBag.Unit, "AR-GE MERKEZİNDE ÇALIŞTIĞI BİRİMİ SEÇİNİZ", new { @class = "form-control", required = "Boş Bırakılamaz" })<br />
                    @Html.TextBox("CodeOfProject", Model.CodeOfProject, new { @class = "form-control", placeholder = "İLİŞKİLİ PROJE KODU / ADI" })<br />
                    break;
                }
                else
                {
                    @Html.HiddenFor(m => m.UnitOfDepartment)
                    @Html.Hidden("CodeOfProject")
                }
            }

            <h6> <label>DIŞARIDA GEÇİRİLEN SÜRE BAŞLANGIÇ TARİHİ</label></h6>
            @if (startDate == null || startDate == "")
            {
                <input type="datetime-local" class="form-control" name="StartDate" value="" /><br />
            }
            else
            {
                <input type="datetime" class="form-control" name="StartDate" value="@Model.StartDate" /><br />
            }
            <h6><label>DIŞARIDA GEÇİRİLEN SÜRE BİTİŞ TARİHİ</label></h6>
            @if (endDate == null || endDate == "")
            {
                <input type="datetime-local" class="form-control" name="EndDate" value="" /><br />
            }
            else
            {
                <input type="datetime" class="form-control" name="EndDate" value="@Model.EndDate" /><br />

            }
            @foreach (var item in yetki)
            {
                if (item.Rol_Id == 9)
                {
                    @Html.DropDownListFor(m => m.MissionId, (List<SelectListItem>)ViewBag.Mission, "GÖREVLİ OLMA NEDENİ", new { @class = "form-control", required = "Boş Bırakılamaz" })<br />
                    break;
                }
                else
                {
                    @Html.HiddenFor(m => m.MissionId)
                }
            }
            @Html.TextBox("Description", (string)ViewBag.Description, new { @class = "form-control", required = "Boş Bırakılamaz", placeholder = "GÖREV YERİ" })<br />


            <div style="margin-top:10px">
                <button class="btn btn-info" id="added">GÜNCELLE</button>
            </div>
        </div>

        @Html.HiddenFor(m => m.Id)
    </fieldset>


}
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<link href="~/Content/DataTables/css/dataTables.bootstrap4.css" rel="stylesheet" />
<link href="https://cdn.datatables.net/1.10.15/css/dataTables.bootstrap.min.css" rel="stylesheet" />
<link href="https://cdn.datatables.net/responsive/2.1.1/css/responsive.bootstrap.min.css" rel="stylesheet" />
<script src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.15/js/dataTables.bootstrap4.min.js "></script>
<script>
    $('#tbl1').dataTable({
        language: {
            "url": "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Turkish.json"
        }
    });
</script>

<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

@if (TempData["MessageError"] != null)
{
    <script>
        swal("UYARI !", "@TempData["MessageError"]", "warning");
    </script>
}
@if (TempData["MessageSuccess"] != null)
{
    <script>
        swal("BAŞARILI !", "@TempData["MessageSuccess"]", "success");
    </script>
}

